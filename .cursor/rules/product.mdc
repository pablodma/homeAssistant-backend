---
description: Contexto de producto y PRD de HomeAI Assistant
globs:
  - "**/*"
alwaysApply: true
---

# HomeAI Assistant - Product Context

## Visi√≥n del Producto

**HomeAI Assistant** es un asistente virtual para gesti√≥n del hogar que opera via WhatsApp, permitiendo a familias organizar sus finanzas, agenda, recordatorios y compras de forma conversacional.

### Propuesta de Valor
- **Para familias ocupadas** que necesitan organizar su hogar
- **Via WhatsApp** (canal que ya usan diariamente)
- **Conversacional e inteligente** (no men√∫s ni comandos r√≠gidos)
- **Multi-tenant SaaS** (un n√∫mero de WhatsApp sirve m√∫ltiples hogares)

## Usuarios Objetivo

### Usuario Primario: "El Organizador del Hogar"
- Adulto (25-55 a√±os) responsable de la gesti√≥n dom√©stica
- Usa WhatsApp diariamente
- Quiere reducir carga mental de recordar todo
- Valora simplicidad sobre features complejos

### Usuario Secundario: "Miembros del Hogar"
- Familia/convivientes del organizador
- Acceso limitado (agregar gastos, ver listas)
- No necesitan instalar nada nuevo

## Funcionalidades MVP

### 1. Gesti√≥n de Presupuesto y Gastos
**Problema:** "No s√© en qu√© se me va la plata"

**Funcionalidades:**
- Definir presupuesto mensual por categor√≠as (supermercado, servicios, transporte, etc.)
- Registrar gastos via chat: "Gast√© $5000 en super"
- Reportes: total del mes, por categor√≠a, comparativa con presupuesto
- Alertas cuando una categor√≠a supera el 80% del l√≠mite

**Flujo t√≠pico:**
```
Usuario: "Gast√© 3500 en el super"
Bot: "‚úì Registrado: $3,500 en Supermercado. 
      Llevas $12,500/$20,000 este mes (62%)"
```

### 2. Agenda de Eventos
**Problema:** "Se me olvidan las citas y eventos"

**Funcionalidades:**
- Crear eventos: "Tengo turno con el dentista el martes a las 10"
- Ver agenda: "Qu√© tengo esta semana?"
- Editar/cancelar eventos existentes
- Detecci√≥n de conflictos y duplicados

**Flujo t√≠pico:**
```
Usuario: "Agendame reuni√≥n de padres el viernes 15 a las 18"
Bot: "‚úì Creado: Reuni√≥n de padres
      üìÖ Viernes 15/3 a las 18:00
      ¬øQuieres que te recuerde antes?"
```

### 3. Recordatorios
**Problema:** "Siempre me olvido de hacer X"

**Funcionalidades:**
- Recordatorios √∫nicos: "Recordame ma√±ana llamar al banco"
- Recordatorios recurrentes: "Recordame todos los lunes sacar la basura"
- Snooze: posponer recordatorios
- Canales: WhatsApp (MVP), email (futuro)

**Flujo t√≠pico:**
```
Usuario: "Recordame el 5 de cada mes pagar el alquiler"
Bot: "‚úì Recordatorio creado: Pagar alquiler
      üîÅ Cada d√≠a 5 del mes
      Te aviso por WhatsApp"
```

### 4. Listas de Compras
**Problema:** "Siempre me olvido algo en el super"

**Funcionalidades:**
- M√∫ltiples listas (supermercado, farmacia, ferreter√≠a)
- Agregar items: "Agreg√° leche y pan a la lista del super"
- Ver lista actual
- Marcar como comprado
- Cantidades y notas opcionales

**Flujo t√≠pico:**
```
Usuario: "Qu√© tengo en la lista del super?"
Bot: "üõí Lista Supermercado (5 items):
      ‚òê Leche (2 litros)
      ‚òê Pan
      ‚òê Huevos
      ‚òê Queso
      ‚òê Manzanas"
```

## Web de Configuraci√≥n

### Prop√≥sito
Interfaz web para configuraci√≥n que NO se puede hacer via chat:
- Onboarding inicial (crear cuenta, vincular WhatsApp)
- Configuraci√≥n de categor√≠as de presupuesto
- Gesti√≥n de miembros del hogar
- Ver historial y logs de conversaciones
- Configuraci√≥n de integraciones

### Pantallas Principales
1. **Login** - Google OAuth
2. **Dashboard** - Resumen del mes (gastos, eventos, recordatorios pendientes)
3. **Presupuesto** - Configurar categor√≠as y l√≠mites
4. **Miembros** - Invitar/gestionar usuarios del tenant
5. **Logs** - Ver conversaciones y decisiones del bot (debugging)
6. **Configuraci√≥n** - Timezone, moneda, preferencias

## Principios de Dise√±o Conversacional

### DO's ‚úì
- **M√≠nimas preguntas**: Inferir lo que se pueda del contexto
- **Confirmaci√≥n solo para acciones riesgosas**: Borrar, cancelar, montos altos
- **Respuestas concisas**: M√°ximo 3-4 l√≠neas
- **Emojis moderados**: Ayudan a escanear, no abusar
- **Contexto temporal**: "Ma√±ana", "el martes" ‚Üí resolver a fecha real

### DON'Ts ‚úó
- No pedir datos que ya tenemos
- No men√∫s numerados (1. Para X, 2. Para Y)
- No respuestas largas tipo "Claro! Estar√© encantado de ayudarte con..."
- No jerga t√©cnica en respuestas al usuario
- No asumir sin confirmar en operaciones destructivas

### Ejemplos de Tono
```
‚ùå Malo: "¬°Hola! ¬øEn qu√© puedo ayudarte hoy? Puedo asistirte con..."
‚úì Bueno: "Hola Pablo üëã"

‚ùå Malo: "He registrado exitosamente tu gasto en la categor√≠a..."
‚úì Bueno: "‚úì Registrado: $5,000 en Super (llevas $15k este mes)"

‚ùå Malo: "¬øEst√°s seguro de que deseas eliminar este registro?"
‚úì Bueno: "¬øBorro el gasto de $5,000 del super?" (solo si es destructivo)
```

## Modelo de Negocio

### Multi-tenancy
- **Un n√∫mero de WhatsApp** sirve a m√∫ltiples tenants (hogares)
- Cada tenant tiene su data completamente aislada
- Identificaci√≥n por n√∫mero de tel√©fono del usuario

### Pricing (futuro)
- **Free tier**: 1 usuario, funciones b√°sicas
- **Premium**: M√∫ltiples usuarios, reportes avanzados, integraciones

## Restricciones T√©cnicas de Producto

### WhatsApp Business API
- Mensajes tienen l√≠mite de caracteres (~4096)
- No se puede iniciar conversaci√≥n (usuario debe escribir primero dentro de 24h)
- Templates para mensajes proactivos (recordatorios) requieren aprobaci√≥n

### Inteligencia Artificial
- El bot puede equivocarse ‚Üí siempre permitir corregir
- Latencia de LLM ‚Üí respuestas en <3 segundos idealmente
- Costo por mensaje ‚Üí optimizar tokens

## Fases del Producto

### Fase 1: POC (Actual)
- Orquestaci√≥n en n8n (sin c√≥digo propio)
- 4 funcionalidades core via WhatsApp
- Web b√°sica de configuraci√≥n
- Single-tenant para validar

### Fase 2: MVP
- Migraci√≥n a Python (c√≥digo propio)
- Multi-tenant completo
- Onboarding self-service
- M√©tricas y analytics b√°sicos

### Fase 3: Growth
- Integraciones (Google Calendar, bancos)
- Funcionalidades premium
- Mobile app companion

## M√©tricas de √âxito

### Engagement
- Mensajes por usuario por semana
- Retenci√≥n a 7/30 d√≠as
- Funcionalidades m√°s usadas

### Calidad
- % de intenciones correctamente detectadas
- Tiempo de respuesta del bot
- Errores/reintentos por conversaci√≥n

### Negocio
- Tenants activos
- Conversi√≥n free ‚Üí premium
- Churn rate

## Glosario de Dominio

| T√©rmino | Definici√≥n |
|---------|------------|
| **Tenant** | Un hogar/cuenta. Agrupa usuarios y toda su data |
| **Owner** | Usuario que cre√≥ el tenant. Permisos totales |
| **Member** | Usuario invitado al tenant. Permisos limitados |
| **Expense** | Gasto registrado con monto, categor√≠a y fecha |
| **Budget** | Presupuesto mensual definido por categor√≠a |
| **Event** | Entrada de calendario con fecha/hora |
| **Reminder** | Alerta programada (√∫nica o recurrente) |
| **Shopping List** | Lista de compras con items |
| **Conversation** | Sesi√≥n de chat con el bot |
